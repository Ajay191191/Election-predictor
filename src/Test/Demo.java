package Test;
import java.io.StringReader;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpression;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;

public class Demo {

    public static void main(String[] args) {
        DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
        try {
            DocumentBuilder builder = domFactory.newDocumentBuilder();
            String document = new String("<o><contributors class=\"object\" null=\"true\"/><coordinates class=\"object\" null=\"true\"/><created_at type=\"string\">Sat Mar 02 14:55:27 +0000 2013</created_at><entities class=\"object\"><hashtags class=\"array\"/><urls class=\"array\"><e class=\"object\"><display_url type=\"string\">beppegrillo.it/2013/03/le_bal…</display_url><expanded_url type=\"string\">http://www.beppegrillo.it/2013/03/le_balle_quotid_3/index.html?utm_source=blog_grillo_it&amp;utm_medium=twitter&amp;utm_campaign=followme</expanded_url><indices class=\"array\"><e type=\"number\">61</e><e type=\"number\">83</e></indices><url type=\"string\">http://t.co/WEgwwLytk7</url></e></urls><user_mentions class=\"array\"><e class=\"object\"><id type=\"number\">437533038</id><id_str type=\"string\">437533038</id_str><indices class=\"array\"><e type=\"number\">3</e><e type=\"number\">19</e></indices><name type=\"string\">Franco Maria Fontana</name><screen_name type=\"string\">francofontana43</screen_name></e><e class=\"object\"><id type=\"number\">19067940</id><id_str type=\"string\">19067940</id_str><indices class=\"array\"><e type=\"number\">47</e><e type=\"number\">60</e></indices><name type=\"string\">Beppe Grillo</name><screen_name type=\"string\">beppe_grillo</screen_name></e></user_mentions></entities><favorited type=\"boolean\">false</favorited><filter_level type=\"string\">medium</filter_level><geo class=\"object\" null=\"true\"/><id type=\"number\">307866747770384385</id><id_str type=\"string\">307866747770384385</id_str><in_reply_to_screen_name class=\"object\" null=\"true\"/><in_reply_to_status_id class=\"object\" null=\"true\"/><in_reply_to_status_id_str class=\"object\" null=\"true\"/><in_reply_to_user_id class=\"object\" null=\"true\"/><in_reply_to_user_id_str class=\"object\" null=\"true\"/><place class=\"object\" null=\"true\"/><possibly_sensitive type=\"boolean\">false</possibly_sensitive><retweet_count type=\"number\">0</retweet_count><retweeted type=\"boolean\">false</retweeted><retweeted_status class=\"object\"><contributors class=\"object\" null=\"true\"/><coordinates class=\"object\" null=\"true\"/><created_at type=\"string\">Sat Mar 02 14:50:20 +0000 2013</created_at><entities class=\"object\"><hashtags class=\"array\"/><urls class=\"array\"><e class=\"object\"><display_url type=\"string\">beppegrillo.it/2013/03/le_bal…</display_url><expanded_url type=\"string\">http://www.beppegrillo.it/2013/03/le_balle_quotid_3/index.html?utm_source=blog_grillo_it&amp;utm_medium=twitter&amp;utm_campaign=followme</expanded_url><indices class=\"array\"><e type=\"number\">40</e><e type=\"number\">62</e></indices><url type=\"string\">http://t.co/WEgwwLytk7</url></e></urls><user_mentions class=\"array\"><e class=\"object\"><id type=\"number\">19067940</id><id_str type=\"string\">19067940</id_str><indices class=\"array\"><e type=\"number\">26</e><e type=\"number\">39</e></indices><name type=\"string\">Beppe Grillo</name><screen_name type=\"string\">beppe_grillo</screen_name></e></user_mentions></entities><favorited type=\"boolean\">false</favorited><geo class=\"object\" null=\"true\"/><id type=\"number\">307865460811124736</id><id_str type=\"string\">307865460811124736</id_str><in_reply_to_screen_name class=\"object\" null=\"true\"/><in_reply_to_status_id class=\"object\" null=\"true\"/><in_reply_to_status_id_str class=\"object\" null=\"true\"/><in_reply_to_user_id class=\"object\" null=\"true\"/><in_reply_to_user_id_str class=\"object\" null=\"true\"/><place class=\"object\" null=\"true\"/><possibly_sensitive type=\"boolean\">false</possibly_sensitive><retweet_count type=\"number\">1</retweet_count><retweeted type=\"boolean\">true</retweeted><source type=\"string\">&lt;a href=\"http://twitter.com/tweetbutton\" rel=\"nofollow\"&gt;Tweet Button&lt;/a&gt;</source><text type=\"string\">La smentita di Grillo via @beppe_grillo http://t.co/WEgwwLytk7</text><truncated type=\"boolean\">false</truncated><user class=\"object\"><contributors_enabled type=\"boolean\">false</contributors_enabled><created_at type=\"string\">Thu Dec 15 14:37:05 +0000 2011</created_at><default_profile type=\"boolean\">false</default_profile><default_profile_image type=\"boolean\">false</default_profile_image><description type=\"string\">Matematico e filosofo, pensionato e studente, padre e nonno. Sempre schierato dalla parte del torto. Col cuore che batte dalla parte giusta.</description><favourites_count type=\"number\">391</favourites_count><follow_request_sent class=\"object\" null=\"true\"/><followers_count type=\"number\">12360</followers_count><following class=\"object\" null=\"true\"/><friends_count type=\"number\">9446</friends_count><geo_enabled type=\"boolean\">false</geo_enabled><id type=\"number\">437533038</id><id_str type=\"string\">437533038</id_str><is_translator type=\"boolean\">false</is_translator><lang type=\"string\">it</lang><listed_count type=\"number\">122</listed_count><location type=\"string\">Roma</location><name type=\"string\">Franco Maria Fontana</name><notifications class=\"object\" null=\"true\"/><profile_background_color type=\"string\">642D8B</profile_background_color><profile_background_image_url type=\"string\">http://a0.twimg.com/images/themes/theme10/bg.gif</profile_background_image_url><profile_background_image_url_https type=\"string\">https://si0.twimg.com/images/themes/theme10/bg.gif</profile_background_image_url_https><profile_background_tile type=\"boolean\">true</profile_background_tile><profile_banner_url type=\"string\">https://si0.twimg.com/profile_banners/437533038/1348257592</profile_banner_url><profile_image_url type=\"string\">http://a0.twimg.com/profile_images/1704665758/image_normal.jpg</profile_image_url><profile_image_url_https type=\"string\">https://si0.twimg.com/profile_images/1704665758/image_normal.jpg</profile_image_url_https><profile_link_color type=\"string\">FF0000</profile_link_color><profile_sidebar_border_color type=\"string\">65B0DA</profile_sidebar_border_color><profile_sidebar_fill_color type=\"string\">7AC3EE</profile_sidebar_fill_color><profile_text_color type=\"string\">3D1957</profile_text_color><profile_use_background_image type=\"boolean\">true</profile_use_background_image><protected type=\"boolean\">false</protected><screen_name type=\"string\">francofontana43</screen_name><statuses_count type=\"number\">17474</statuses_count><time_zone type=\"string\">West Central Africa</time_zone><url type=\"string\">http://francomariafontana.blogspot.com/</url><utc_offset type=\"number\">3600</utc_offset><verified type=\"boolean\">false</verified></user></retweeted_status><source type=\"string\">web</source><text type=\"string\">RT @francofontana43: La smentita di Grillo via @beppe_grillo http://t.co/WEgwwLytk7</text><truncated type=\"boolean\">false</truncated><user class=\"object\"><contributors_enabled type=\"boolean\">false</contributors_enabled><created_at type=\"string\">Tue Feb 12 09:02:01 +0000 2013</created_at><default_profile type=\"boolean\">false</default_profile><default_profile_image type=\"boolean\">false</default_profile_image><description type=\"string\">Pensante, non credente. Non scrittore, scrivente. Non fumetti, non anime, nuvole in movimento. Vanno, vengono, a volte si fermano e si lasciano ricordare.</description><favourites_count type=\"number\">683</favourites_count><follow_request_sent class=\"object\" null=\"true\"/><followers_count type=\"number\">165</followers_count><following class=\"object\" null=\"true\"/><friends_count type=\"number\">319</friends_count><geo_enabled type=\"boolean\">false</geo_enabled><id type=\"number\">1171395356</id><id_str type=\"string\">1171395356</id_str><is_translator type=\"boolean\">false</is_translator><lang type=\"string\">it</lang><listed_count type=\"number\">2</listed_count><location type=\"string\">Parma</location><name type=\"string\">Nuvole di Carta</name><notifications class=\"object\" null=\"true\"/><profile_background_color type=\"string\">0D3242</profile_background_color><profile_background_image_url type=\"string\">http://a0.twimg.com/profile_background_images/797368468/7ca1baa61b3bf1a0251aa23d91a9e3b4.jpeg</profile_background_image_url><profile_background_image_url_https type=\"string\">https://si0.twimg.com/profile_background_images/797368468/7ca1baa61b3bf1a0251aa23d91a9e3b4.jpeg</profile_background_image_url_https><profile_background_tile type=\"boolean\">true</profile_background_tile><profile_banner_url type=\"string\">https://si0.twimg.com/profile_banners/1171395356/1361543816</profile_banner_url><profile_image_url type=\"string\">http://a0.twimg.com/profile_images/3242789856/ed8a838d1329b116b5a87ffe98982732_normal.jpeg</profile_image_url><profile_image_url_https type=\"string\">https://si0.twimg.com/profile_images/3242789856/ed8a838d1329b116b5a87ffe98982732_normal.jpeg</profile_image_url_https><profile_link_color type=\"string\">1F98C7</profile_link_color><profile_sidebar_border_color type=\"string\">FFFFFF</profile_sidebar_border_color><profile_sidebar_fill_color type=\"string\">DDEEF6</profile_sidebar_fill_color><profile_text_color type=\"string\">333333</profile_text_color><profile_use_background_image type=\"boolean\">true</profile_use_background_image><protected type=\"boolean\">false</protected><screen_name type=\"string\">Leggilenuvole</screen_name><statuses_count type=\"number\">2483</statuses_count><time_zone type=\"string\">Amsterdam</time_zone><url class=\"object\" null=\"true\"/><utc_offset type=\"number\">3600</utc_offset><verified type=\"boolean\">false</verified></user></o>");
            
          //  File xml = new File("/home/ajay/Project/303096058739826689.xml");
          //Document dDoc = builder.parse(document);
            InputSource dDoc = new InputSource(new StringReader(document));


            NodeList nl;

            // OPTION #1
            XPath xPath = XPathFactory.newInstance().newXPath();
            nl = (NodeList) xPath.evaluate("o/text", dDoc, XPathConstants.NODESET);
//            printResults(nl);
//            nl = (NodeList) xPath.evaluate("/o/text", dDoc, XPathConstants.NODESET);
//            //printResults(nl);
            System.out.println("Text : " + nl.item(0).getTextContent());

            // OPTION #2
            dDoc = new InputSource(new StringReader(document));
            XPathExpression xPathExpression = xPath.compile("/o/user/screen_name");
            nl = (NodeList) xPathExpression.evaluate(dDoc, XPathConstants.NODESET);
//            printResults(nl);
//            nl = (NodeList) xPathExpression.evaluate(dDoc, XPathConstants.NODESET);
//            //printResults(nl);
            System.out.println("Screen : " + nl.item(0).getTextContent());
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private static void printResults(NodeList nl) {
        for(int x=0; x<nl.getLength(); x++) {
            System.out.println("the value is: " + nl.item(x).getTextContent());
        }
    }

}